2023-06-22 12:44:35.505 +03:00 [ERR] An error occurred using the connection to database 'ExpenseMaster' on server '.\SQLEXPRESS'.
2023-06-22 12:44:35.641 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ExpenseMaster.DAL.DatabaseContext.ApplicationDatabaseContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Не удается открыть базу данных "ExpenseMaster", запрашиваемую именем входа. Не удалось выполнить вход.
При входе в систему пользователя "DESKTOP-VT57MSN\ilyad" произошла ошибка.
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
ClientConnectionId:1f99636c-ec9d-424b-b5f0-c086f3023046
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Не удается открыть базу данных "ExpenseMaster", запрашиваемую именем входа. Не удалось выполнить вход.
При входе в систему пользователя "DESKTOP-VT57MSN\ilyad" произошла ошибка.
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
ClientConnectionId:1f99636c-ec9d-424b-b5f0-c086f3023046
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
<<<<<<< HEAD
2023-06-22 12:51:32.202 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2023-06-22 13:16:10.634 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> master
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
<<<<<<< HEAD
2023-06-22 12:51:32.386 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2023-06-22 13:16:10.738 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> master
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
<<<<<<< HEAD
2023-06-22 12:51:32.429 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
=======
2023-06-22 13:16:10.744 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
>>>>>>> master
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
<<<<<<< HEAD
2023-06-22 12:51:32.706 +03:00 [ERR] Failed executing DbCommand (127ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 30), @p2='?' (DbType = Int32), @p3='?' (Size = 30), @p4='?' (DbType = Int32), @p5='?' (Size = 30), @p6='?' (DbType = Int32), @p7='?' (Size = 30), @p8='?' (DbType = Int32), @p9='?' (Size = 30), @p10='?' (DbType = Int32), @p11='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Date), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Date), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p22='?' (DbType = Int32), @p23='?' (DbType = Date), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (DbType = Int32), @p28='?' (DbType = Date), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p32='?' (DbType = Int32), @p33='?' (DbType = Date), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (DbType = Int32), @p38='?' (DbType = Date), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p42='?' (DbType = Int32), @p43='?' (DbType = Date), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Date), @p49='?' (DbType = Int32), @p50='?' (DbType = Int32), @p51='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p52='?' (DbType = Int32), @p53='?' (DbType = Date), @p54='?' (DbType = Int32), @p55='?' (DbType = Int32), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = Date), @p59='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([Id], [Name])
VALUES (@p0, @p1),
(@p2, @p3),
(@p4, @p5),
(@p6, @p7),
(@p8, @p9);
INSERT INTO [Expenses] ([Id], [Amount], [CategoryId], [Date], [UserId])
VALUES (@p10, @p11, @p12, @p13, @p14),
(@p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24),
(@p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34);
INSERT INTO [Incomes] ([Id], [Amount], [CategoryId], [Date], [UserId])
VALUES (@p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44),
(@p45, @p46, @p47, @p48, @p49),
(@p50, @p51, @p52, @p53, @p54),
(@p55, @p56, @p57, @p58, @p59);
2023-06-22 12:51:32.777 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ExpenseMaster.DAL.DatabaseContext.ApplicationDatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Невозможно вставить явное значение для столбца идентификаторов в таблице "Categories", когда параметр IDENTITY_INSERT имеет значение OFF.
Невозможно вставить явное значение для столбца идентификаторов в таблице "Expenses", когда параметр IDENTITY_INSERT имеет значение OFF.
Невозможно вставить явное значение для столбца идентификаторов в таблице "Incomes", когда параметр IDENTITY_INSERT имеет значение OFF.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9da6f969-1c9c-4b5d-b18d-8dacf1f03cda
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Невозможно вставить явное значение для столбца идентификаторов в таблице "Categories", когда параметр IDENTITY_INSERT имеет значение OFF.
Невозможно вставить явное значение для столбца идентификаторов в таблице "Expenses", когда параметр IDENTITY_INSERT имеет значение OFF.
Невозможно вставить явное значение для столбца идентификаторов в таблице "Incomes", когда параметр IDENTITY_INSERT имеет значение OFF.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:9da6f969-1c9c-4b5d-b18d-8dacf1f03cda
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-06-22 12:56:20.680 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 12:56:20.852 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 12:56:20.888 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 12:56:21.488 +03:00 [ERR] Failed executing DbCommand (441ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 30), @p2='?' (DbType = Int32), @p3='?' (Size = 30), @p4='?' (DbType = Int32), @p5='?' (Size = 30), @p6='?' (DbType = Int32), @p7='?' (Size = 30), @p8='?' (DbType = Int32), @p9='?' (Size = 30), @p10='?' (DbType = Int32), @p11='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p12='?' (DbType = Int32), @p13='?' (DbType = Date), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p17='?' (DbType = Int32), @p18='?' (DbType = Date), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p22='?' (DbType = Int32), @p23='?' (DbType = Date), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p27='?' (DbType = Int32), @p28='?' (DbType = Date), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p32='?' (DbType = Int32), @p33='?' (DbType = Date), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p37='?' (DbType = Int32), @p38='?' (DbType = Date), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p42='?' (DbType = Int32), @p43='?' (DbType = Date), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p47='?' (DbType = Int32), @p48='?' (DbType = Date), @p49='?' (DbType = Int32), @p50='?' (DbType = Int32), @p51='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p52='?' (DbType = Int32), @p53='?' (DbType = Date), @p54='?' (DbType = Int32), @p55='?' (DbType = Int32), @p56='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p57='?' (DbType = Int32), @p58='?' (DbType = Date), @p59='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Categories] ([Id], [Name])
VALUES (@p0, @p1),
(@p2, @p3),
(@p4, @p5),
(@p6, @p7),
(@p8, @p9);
INSERT INTO [Expenses] ([Id], [Amount], [CategoryId], [Date], [UserId])
VALUES (@p10, @p11, @p12, @p13, @p14),
(@p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24),
(@p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34);
INSERT INTO [Incomes] ([Id], [Amount], [CategoryId], [Date], [UserId])
VALUES (@p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44),
(@p45, @p46, @p47, @p48, @p49),
(@p50, @p51, @p52, @p53, @p54),
(@p55, @p56, @p57, @p58, @p59);
2023-06-22 12:56:21.582 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ExpenseMaster.DAL.DatabaseContext.ApplicationDatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Невозможно вставить явное значение для столбца идентификаторов в таблице "Categories", когда параметр IDENTITY_INSERT имеет значение OFF.
Невозможно вставить явное значение для столбца идентификаторов в таблице "Expenses", когда параметр IDENTITY_INSERT имеет значение OFF.
Невозможно вставить явное значение для столбца идентификаторов в таблице "Incomes", когда параметр IDENTITY_INSERT имеет значение OFF.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:20f44c7a-6f4d-484e-ab4e-5fc77db946b7
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Невозможно вставить явное значение для столбца идентификаторов в таблице "Categories", когда параметр IDENTITY_INSERT имеет значение OFF.
Невозможно вставить явное значение для столбца идентификаторов в таблице "Expenses", когда параметр IDENTITY_INSERT имеет значение OFF.
Невозможно вставить явное значение для столбца идентификаторов в таблице "Incomes", когда параметр IDENTITY_INSERT имеет значение OFF.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:20f44c7a-6f4d-484e-ab4e-5fc77db946b7
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
=======
2023-06-22 13:16:10.979 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 13:16:10.980 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 13:16:10.986 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 13:16:10.987 +03:00 [INF] Hosting environment: Development
2023-06-22 13:16:10.988 +03:00 [INF] Content root path: C:\Users\stasd\Git\ExpenseMaster\ExpenseMaster\
2023-06-22 13:16:11.612 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 13:16:12.146 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 542.7495ms
2023-06-22 13:16:12.541 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_vs/browserLink - -
2023-06-22 13:16:12.541 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 13:16:12.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11996 application/javascript;+charset=utf-8 16.3891ms
2023-06-22 13:16:12.645 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 104.1680ms
2023-06-22 13:16:13.096 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 13:16:13.351 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 254.7652ms
2023-06-22 13:16:18.389 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/public/expenses - -
2023-06-22 13:16:18.402 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ExpenseController.GetExpenses (ExpenseMaster)'
2023-06-22 13:16:18.428 +03:00 [INF] Route matched with {action = "GetExpenses", controller = "Expense"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExpenseMaster.BusinessLogic.Dto.ExpenseItemDto]]] GetExpenses() on controller ExpenseMaster.Controllers.ExpenseController (ExpenseMaster).
2023-06-22 13:16:18.674 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Amount], [e].[CategoryId], [e].[Date], [e].[UserId]
FROM [Expenses] AS [e]
2023-06-22 13:16:18.695 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ExpenseMaster.BusinessLogic.Dto.ExpenseItemDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 13:16:18.740 +03:00 [INF] Executed action ExpenseMaster.Controllers.ExpenseController.GetExpenses (ExpenseMaster) in 299.1692ms
2023-06-22 13:16:18.743 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ExpenseController.GetExpenses (ExpenseMaster)'
2023-06-22 13:16:18.757 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/public/expenses - - - 200 - application/json;+charset=utf-8 368.6003ms
>>>>>>> master
2023-06-22 13:29:26.451 +03:00 [ERR] An error occurred using the connection to database 'ExpenseMaster' on server '.'.
2023-06-22 13:29:26.585 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ExpenseMaster.DAL.DatabaseContext.ApplicationDatabaseContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): Не удается найти указанный файл.
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
 ---> System.ComponentModel.Win32Exception (2): Не удается найти указанный файл.
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.Open(SqlConnectionOverrides overrides)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:2,State:0,Class:20
2023-06-22 13:30:46.420 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:30:46.611 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:30:46.636 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:30:46.872 +03:00 [INF] Executed DbCommand (96ms) [Parameters=[@p0='?' (Size = 30), @p1='?' (Size = 30), @p2='?' (Size = 30), @p3='?' (Size = 30), @p4='?' (Size = 30), @p5='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32), @p7='?' (DbType = Date), @p8='?' (DbType = Int32), @p9='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (DbType = Date), @p12='?' (DbType = Int32), @p13='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p14='?' (DbType = Int32), @p15='?' (DbType = Date), @p16='?' (DbType = Int32), @p17='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p18='?' (DbType = Int32), @p19='?' (DbType = Date), @p20='?' (DbType = Int32), @p21='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p22='?' (DbType = Int32), @p23='?' (DbType = Date), @p24='?' (DbType = Int32), @p25='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p26='?' (DbType = Int32), @p27='?' (DbType = Date), @p28='?' (DbType = Int32), @p29='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p30='?' (DbType = Int32), @p31='?' (DbType = Date), @p32='?' (DbType = Int32), @p33='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p34='?' (DbType = Int32), @p35='?' (DbType = Date), @p36='?' (DbType = Int32), @p37='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = Int32), @p39='?' (DbType = Date), @p40='?' (DbType = Int32), @p41='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p42='?' (DbType = Int32), @p43='?' (DbType = Date), @p44='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [Categories] USING (
VALUES (@p0, 0),
(@p1, 1),
(@p2, 2),
(@p3, 3),
(@p4, 4)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position;
MERGE [Expenses] USING (
VALUES (@p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, 1),
(@p13, @p14, @p15, @p16, 2),
(@p17, @p18, @p19, @p20, 3),
(@p21, @p22, @p23, @p24, 4)) AS i ([Amount], [CategoryId], [Date], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CategoryId], [Date], [UserId])
VALUES (i.[Amount], i.[CategoryId], i.[Date], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
MERGE [Incomes] USING (
VALUES (@p25, @p26, @p27, @p28, 0),
(@p29, @p30, @p31, @p32, 1),
(@p33, @p34, @p35, @p36, 2),
(@p37, @p38, @p39, @p40, 3),
(@p41, @p42, @p43, @p44, 4)) AS i ([Amount], [CategoryId], [Date], [UserId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Amount], [CategoryId], [Date], [UserId])
VALUES (i.[Amount], i.[CategoryId], i.[Date], i.[UserId])
OUTPUT INSERTED.[Id], i._Position;
2023-06-22 13:30:46.973 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ExpenseMaster.DAL.DatabaseContext.ApplicationDatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Конфликт инструкции MERGE с ограничением FOREIGN KEY "FK_Expenses_Users_UserId". Конфликт произошел в базе данных "ExpenseMaster", таблица "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:4b331c44-0c81-4207-b49d-6543112b7645
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Конфликт инструкции MERGE с ограничением FOREIGN KEY "FK_Expenses_Users_UserId". Конфликт произошел в базе данных "ExpenseMaster", таблица "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:4b331c44-0c81-4207-b49d-6543112b7645
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-06-22 13:32:08.362 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-06-22 13:32:08.433 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-06-22 13:32:08.436 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-06-22 13:32:08.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-06-22 13:32:08.458 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-06-22 13:32:08.475 +03:00 [INF] Applying migration '20230615125220_addModel'.
2023-06-22 13:32:08.667 +03:00 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Expenses]') AND [c].[name] = N'Amount');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Expenses] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Expenses] ALTER COLUMN [Amount] decimal(10,2) NOT NULL;
2023-06-22 13:32:08.706 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name') AND [object_id] = OBJECT_ID(N'[Categories]'))
    SET IDENTITY_INSERT [Categories] ON;
INSERT INTO [Categories] ([Id], [Name])
VALUES (1, N'Category 1'),
(2, N'Category 2'),
(3, N'Category 3'),
(4, N'Category 4'),
(5, N'Category 5');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name') AND [object_id] = OBJECT_ID(N'[Categories]'))
    SET IDENTITY_INSERT [Categories] OFF;
2023-06-22 13:32:08.751 +03:00 [ERR] Failed executing DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Amount', N'CategoryId', N'Date', N'UserId') AND [object_id] = OBJECT_ID(N'[Expenses]'))
    SET IDENTITY_INSERT [Expenses] ON;
INSERT INTO [Expenses] ([Id], [Amount], [CategoryId], [Date], [UserId])
VALUES (1, 100.0, 1, '2023-06-15', 1),
(2, 50.0, 2, '2023-06-15', 1),
(3, 75.0, 1, '2023-06-15', 2),
(4, 120.0, 3, '2023-06-15', 2),
(5, 200.0, 2, '2023-06-15', 3);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Amount', N'CategoryId', N'Date', N'UserId') AND [object_id] = OBJECT_ID(N'[Expenses]'))
    SET IDENTITY_INSERT [Expenses] OFF;
2023-06-22 13:51:44.058 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:51:44.237 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:51:44.272 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:51:44.497 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 13:51:44.498 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 13:51:44.505 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 13:51:44.506 +03:00 [INF] Hosting environment: Development
2023-06-22 13:51:44.507 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 13:51:46.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 13:51:47.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 870.9888ms
2023-06-22 13:51:47.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 13:51:47.389 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 15.8866ms
2023-06-22 13:51:47.883 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 13:51:48.102 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 218.7589ms
2023-06-22 13:52:05.512 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 13:52:05.534 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 13:52:05.577 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 13:52:06.603 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 13:52:07.307 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 13:52:07.327 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 1741.3656ms
2023-06-22 13:52:07.330 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 13:52:07.344 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1831.2859ms
2023-06-22 13:52:52.036 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 13:52:52.045 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 13:52:52.046 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 13:52:52.117 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 13:52:52.119 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 13:52:52.120 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 73.2665ms
2023-06-22 13:52:52.121 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 13:52:52.122 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 87.5011ms
2023-06-22 13:53:06.382 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 13:53:06.391 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 13:53:06.402 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 13:53:06.455 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 500 - text/plain;+charset=utf-8 73.4584ms
2023-06-22 13:53:13.823 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 13:53:13.825 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 13:53:13.827 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 13:53:13.835 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 500 - text/plain;+charset=utf-8 12.2415ms
2023-06-22 13:53:58.692 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 13:53:58.697 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 13:53:58.699 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 13:53:58.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 500 - text/plain;+charset=utf-8 11.1557ms
2023-06-22 13:59:21.854 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:59:22.079 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:59:22.102 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 13:59:22.271 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 13:59:22.272 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 13:59:22.278 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 13:59:22.279 +03:00 [INF] Hosting environment: Development
2023-06-22 13:59:22.279 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 13:59:23.171 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 13:59:23.789 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 625.2799ms
2023-06-22 13:59:23.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 13:59:23.873 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 17.3613ms
2023-06-22 13:59:24.025 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 13:59:24.231 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 205.5684ms
2023-06-22 13:59:37.775 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 13:59:37.789 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 13:59:37.826 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 13:59:38.507 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 13:59:38.762 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 13:59:38.786 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 948.6398ms
2023-06-22 13:59:38.790 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 13:59:38.808 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1033.3582ms
2023-06-22 14:00:00.992 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 14:00:01.028 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 14:00:01.037 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:00:01.072 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 500 - text/plain;+charset=utf-8 80.5727ms
2023-06-22 14:01:37.452 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:01:37.696 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:01:37.721 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:01:37.899 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:01:37.900 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:01:37.906 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:01:37.907 +03:00 [INF] Hosting environment: Development
2023-06-22 14:01:37.907 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:01:39.216 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:01:39.896 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 688.8860ms
2023-06-22 14:01:39.951 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:01:39.958 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 6.3086ms
2023-06-22 14:01:40.070 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:01:40.258 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 187.7373ms
2023-06-22 14:01:58.543 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 14:01:58.559 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:01:58.604 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:01:59.466 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:01:59.786 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:01:59.806 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 1193.3999ms
2023-06-22 14:01:59.810 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:01:59.827 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1284.1771ms
2023-06-22 14:02:18.959 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 14:02:18.975 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 14:02:18.986 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:02:19.040 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 500 - text/plain;+charset=utf-8 83.2563ms
2023-06-22 14:03:56.199 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:03:56.369 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:03:56.398 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:03:56.556 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:03:56.557 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:03:56.562 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:03:56.563 +03:00 [INF] Hosting environment: Development
2023-06-22 14:03:56.564 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:03:57.769 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:03:58.432 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 671.1255ms
2023-06-22 14:03:58.504 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:03:58.510 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 6.4076ms
2023-06-22 14:03:58.650 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:03:58.850 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 199.4230ms
2023-06-22 14:04:10.396 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 14:04:10.407 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:04:10.468 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:04:11.277 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:04:11.531 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:04:11.550 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 1073.2216ms
2023-06-22 14:04:11.554 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:04:11.565 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1169.8547ms
2023-06-22 14:04:32.419 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 14:04:32.430 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 14:04:32.440 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:04:32.489 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 500 - text/plain;+charset=utf-8 70.6596ms
2023-06-22 14:05:12.605 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:05:12.607 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:05:12.609 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:05:12.613 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 7.9236ms
2023-06-22 14:20:16.655 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:20:16.855 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:20:16.885 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:20:17.097 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:20:17.097 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:20:17.103 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:20:17.104 +03:00 [INF] Hosting environment: Development
2023-06-22 14:20:17.105 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:20:18.323 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:20:48.793 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:20:48.980 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:20:49.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:20:49.231 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:20:49.232 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:20:49.238 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:20:49.239 +03:00 [INF] Hosting environment: Development
2023-06-22 14:20:49.240 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:20:50.266 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:21:12.914 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:21:13.119 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:21:13.145 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:21:13.362 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:21:13.362 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:21:13.368 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:21:13.369 +03:00 [INF] Hosting environment: Development
2023-06-22 14:21:13.370 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:21:14.578 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:21:15.191 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 622.4785ms
2023-06-22 14:21:15.251 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:21:15.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.5803ms
2023-06-22 14:21:15.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:21:15.646 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 231.3820ms
2023-06-22 14:21:28.004 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 14:21:28.016 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:21:28.058 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:21:28.779 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:21:29.031 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:21:29.051 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 983.5318ms
2023-06-22 14:21:29.054 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:21:29.071 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1067.0095ms
2023-06-22 14:21:42.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:21:42.190 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:21:42.202 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:21:42.255 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 76.1689ms
2023-06-22 14:23:34.617 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:23:34.797 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:23:34.824 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:23:34.988 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:23:34.989 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:23:34.995 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:23:34.997 +03:00 [INF] Hosting environment: Development
2023-06-22 14:23:34.998 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:23:36.241 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:23:36.898 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 669.7956ms
2023-06-22 14:23:36.947 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:23:36.954 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 6.6930ms
2023-06-22 14:23:37.080 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:23:37.270 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 189.8469ms
2023-06-22 14:23:54.880 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 14:23:54.894 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:23:54.936 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:23:55.623 +03:00 [INF] Executed DbCommand (78ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:23:55.872 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:23:55.894 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 948.8024ms
2023-06-22 14:23:55.897 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:23:55.912 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1031.6003ms
2023-06-22 14:24:13.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:24:13.208 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:24:13.217 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:24:13.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 62.8478ms
2023-06-22 14:24:29.604 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:24:29.607 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:24:29.611 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:24:29.618 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 17.3317ms
2023-06-22 14:29:54.433 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:29:54.628 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:29:54.653 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:29:54.839 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:29:54.841 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:29:54.850 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:29:54.852 +03:00 [INF] Hosting environment: Development
2023-06-22 14:29:54.853 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:29:55.904 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:29:56.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 572.7125ms
2023-06-22 14:29:56.521 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:29:56.529 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.2828ms
2023-06-22 14:29:56.642 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:29:56.823 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 180.8452ms
2023-06-22 14:30:07.847 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 14:30:07.857 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:30:07.899 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:30:08.574 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:30:08.836 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:30:08.854 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 945.3526ms
2023-06-22 14:30:08.858 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:30:08.870 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1022.2819ms
2023-06-22 14:30:30.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:30:30.671 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:30:30.682 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:30:30.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 63.6212ms
2023-06-22 14:31:06.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:31:06.855 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:31:06.857 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:31:06.862 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 8.6333ms
2023-06-22 14:35:07.180 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:35:07.394 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:35:07.429 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:35:07.649 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:35:07.650 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:35:07.655 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:35:07.657 +03:00 [INF] Hosting environment: Development
2023-06-22 14:35:07.657 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:35:08.837 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:35:09.530 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 701.6617ms
2023-06-22 14:35:09.584 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:35:09.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 7.0723ms
2023-06-22 14:35:09.734 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:35:09.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 207.5219ms
2023-06-22 14:35:20.794 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 14:35:20.804 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:35:20.848 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:35:21.511 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:35:21.779 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:35:21.798 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 941.432ms
2023-06-22 14:35:21.801 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:35:21.815 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1021.5032ms
2023-06-22 14:35:35.773 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:35:35.787 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:35:35.802 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 14:35:35.861 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 88.2146ms
2023-06-22 14:43:06.119 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:43:06.374 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:43:06.398 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:43:06.505 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 14:43:06.789 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:43:06.789 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:43:06.795 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:43:06.796 +03:00 [INF] Hosting environment: Development
2023-06-22 14:43:06.797 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:43:07.791 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:45:20.097 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:45:20.411 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:45:20.453 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:45:20.522 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 14:45:20.713 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:45:20.715 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:45:20.720 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:45:20.721 +03:00 [INF] Hosting environment: Development
2023-06-22 14:45:20.722 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:45:21.947 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:46:13.814 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:46:14.034 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:46:14.057 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:46:14.102 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 14:46:14.291 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:46:14.291 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:46:14.296 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:46:14.297 +03:00 [INF] Hosting environment: Development
2023-06-22 14:46:14.297 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:46:15.299 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:46:55.253 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:46:55.422 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:46:55.450 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:46:55.546 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 14:46:55.711 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:46:55.712 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:46:55.717 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:46:55.718 +03:00 [INF] Hosting environment: Development
2023-06-22 14:46:55.719 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:46:56.912 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:48:13.547 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:48:13.731 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:48:13.752 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:48:13.791 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 14:48:13.972 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:48:13.973 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:48:13.978 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:48:13.980 +03:00 [INF] Hosting environment: Development
2023-06-22 14:48:13.981 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:48:15.359 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:48:16.010 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 659.7139ms
2023-06-22 14:48:16.063 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:48:16.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 7.6497ms
2023-06-22 14:48:16.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:48:16.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 210.2112ms
2023-06-22 14:48:30.602 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 14:48:30.626 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:48:30.673 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:48:31.369 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:48:31.648 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:48:31.668 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 986.2957ms
2023-06-22 14:48:31.671 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:48:31.684 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1081.7768ms
2023-06-22 14:48:43.971 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:48:43.985 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:48:43.996 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 14:48:43.998 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 26.8382ms
2023-06-22 14:49:18.085 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:49:18.262 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:49:18.285 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:49:18.334 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 14:49:18.492 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:49:18.493 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:49:18.498 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:49:18.499 +03:00 [INF] Hosting environment: Development
2023-06-22 14:49:18.500 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:49:19.851 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:49:20.403 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 566.0645ms
2023-06-22 14:49:20.456 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:49:20.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 7.2821ms
2023-06-22 14:49:20.581 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:49:20.779 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 197.9625ms
2023-06-22 14:49:34.152 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 14:49:34.168 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:49:34.221 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:49:34.790 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:49:35.002 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:49:35.023 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 792.4764ms
2023-06-22 14:49:35.026 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:49:35.038 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 886.5215ms
2023-06-22 14:50:02.653 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:50:02.670 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:50:02.680 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 14:50:02.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 30.4501ms
2023-06-22 14:50:11.241 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 14:50:11.245 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 14:50:11.246 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 14:50:11.247 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 401 0 - 5.9649ms
2023-06-22 14:53:57.046 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:53:57.049 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:53:57.050 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 14:53:57.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 4.9603ms
2023-06-22 14:56:38.143 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 14:56:38.148 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 14:56:38.148 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 14:56:38.149 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 5.8750ms
2023-06-22 14:59:29.228 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:59:29.422 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:59:29.445 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:59:29.491 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 14:59:29.680 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 14:59:29.688 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 14:59:29.695 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 14:59:29.697 +03:00 [INF] Hosting environment: Development
2023-06-22 14:59:29.697 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 14:59:31.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 14:59:31.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 673.3867ms
2023-06-22 14:59:31.828 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 14:59:31.837 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.6528ms
2023-06-22 14:59:31.967 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 14:59:32.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 214.5014ms
2023-06-22 14:59:43.450 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Registration application/json 53
2023-06-22 14:59:43.461 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster)'
2023-06-22 14:59:43.496 +03:00 [INF] Route matched with {action = "Create", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:59:43.893 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__userRegistrationDto_Login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Login] = @__userRegistrationDto_Login_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 14:59:44.151 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[@p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Login], [PasswordHash], [PasswordSalt], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-22 14:59:44.242 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto'.
2023-06-22 14:59:44.259 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster) in 754.3962ms
2023-06-22 14:59:44.263 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster)'
2023-06-22 14:59:44.275 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Registration application/json 53 - 200 - application/json;+charset=utf-8 825.4576ms
2023-06-22 14:59:52.009 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 37
2023-06-22 14:59:52.011 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:59:52.016 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 14:59:52.259 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 14:59:52.468 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 14:59:52.472 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 453.3546ms
2023-06-22 14:59:52.473 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 14:59:52.475 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 37 - 200 - application/json;+charset=utf-8 465.3769ms
2023-06-22 15:00:11.185 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:00:11.197 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 15:00:11.208 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:00:11.210 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 30.8760ms
2023-06-22 15:03:00.610 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:03:00.781 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:03:00.817 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:03:00.881 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:03:01.059 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:03:01.060 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:03:01.064 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:03:01.065 +03:00 [INF] Hosting environment: Development
2023-06-22 15:03:01.065 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:03:02.447 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:03:03.153 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 730.5611ms
2023-06-22 15:03:03.204 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:03:03.214 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.8044ms
2023-06-22 15:03:03.344 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:03:03.552 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 207.6272ms
2023-06-22 15:03:13.549 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 37
2023-06-22 15:03:13.566 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:03:13.610 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:03:14.239 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:03:14.499 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:03:14.522 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 901.2291ms
2023-06-22 15:03:14.526 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:03:14.539 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 37 - 200 - application/json;+charset=utf-8 990.0926ms
2023-06-22 15:03:27.719 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:03:27.730 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 15:03:27.741 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:03:27.743 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 24.5162ms
2023-06-22 15:09:55.479 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:09:55.661 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:09:55.686 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:09:55.728 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:09:55.897 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:09:55.905 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:09:55.929 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:09:55.931 +03:00 [INF] Hosting environment: Development
2023-06-22 15:09:55.932 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:09:56.605 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:09:57.213 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 617.5760ms
2023-06-22 15:09:57.259 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:09:57.266 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 7.1482ms
2023-06-22 15:09:57.375 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:09:57.580 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 205.0200ms
2023-06-22 15:10:01.761 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 15:10:01.771 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:10:01.811 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:10:02.398 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:10:02.647 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:10:02.665 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 845.3844ms
2023-06-22 15:10:02.669 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:10:02.683 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 922.2265ms
2023-06-22 15:10:14.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:10:14.666 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 15:10:14.677 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:10:14.678 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 21.5813ms
2023-06-22 15:18:29.477 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:18:29.672 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:18:29.699 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:18:29.744 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:18:29.959 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:18:29.960 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:18:29.967 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:18:29.968 +03:00 [INF] Hosting environment: Development
2023-06-22 15:18:29.969 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:18:31.370 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:18:32.210 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 846.9304ms
2023-06-22 15:18:32.266 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:18:32.275 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.2975ms
2023-06-22 15:18:32.416 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:18:32.653 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 236.3332ms
2023-06-22 15:18:36.194 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 15:18:36.208 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:18:36.243 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:18:36.876 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:18:37.118 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:18:37.138 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 885.9753ms
2023-06-22 15:18:37.143 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:18:37.161 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 966.4105ms
2023-06-22 15:18:48.481 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:18:48.492 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 15:18:48.503 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:18:48.504 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 23.0882ms
2023-06-22 15:19:41.984 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:19:42.165 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:19:42.193 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:19:42.235 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:19:42.450 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:19:42.451 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:19:42.456 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:19:42.457 +03:00 [INF] Hosting environment: Development
2023-06-22 15:19:42.458 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:19:43.395 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:19:44.012 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 628.8026ms
2023-06-22 15:19:44.068 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:19:44.077 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.5653ms
2023-06-22 15:19:44.215 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:19:44.424 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 209.5568ms
2023-06-22 15:19:47.879 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:19:47.898 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:19:47.940 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 15:19:56.029 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 8078.2567ms
2023-06-22 15:19:56.033 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:19:58.849 +03:00 [ERR] There was an error.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ExpenseMaster.BusinessLogic.Implementations.TokenService.GetUserIdFromClaims(ClaimsPrincipal claimsPrincipal) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\TokenService.cs:line 53
   at ExpenseMaster.Controllers.ProfileController.GetProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 25
   at lambda_method137(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
2023-06-22 15:19:58.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - - 11050.4909ms
2023-06-22 15:20:09.746 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 15:20:09.747 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:20:09.763 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:20:10.257 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:20:10.506 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:20:10.521 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 755.9947ms
2023-06-22 15:20:10.523 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:20:10.536 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 790.3943ms
2023-06-22 15:20:20.751 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:20:20.753 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:20:20.758 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 15:20:30.980 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 10219.5182ms
2023-06-22 15:20:30.982 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:20:32.716 +03:00 [ERR] There was an error.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ExpenseMaster.BusinessLogic.Implementations.TokenService.GetUserIdFromClaims(ClaimsPrincipal claimsPrincipal) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\TokenService.cs:line 53
   at ExpenseMaster.Controllers.ProfileController.GetProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 25
   at lambda_method137(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
2023-06-22 15:20:32.721 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - - 11970.6763ms
2023-06-22 15:23:00.876 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:23:01.064 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:23:01.089 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:23:01.130 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:23:01.301 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:23:01.302 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:23:01.307 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:23:01.308 +03:00 [INF] Hosting environment: Development
2023-06-22 15:23:01.309 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:23:02.742 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:23:03.371 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 640.7630ms
2023-06-22 15:23:03.429 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:23:03.438 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.0947ms
2023-06-22 15:23:03.552 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:23:03.800 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 247.8227ms
2023-06-22 15:23:07.119 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 15:23:07.133 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:23:07.167 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:23:07.758 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:24:59.734 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:24:59.878 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 112696.8313ms
2023-06-22 15:24:59.882 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:24:59.893 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 112773.7216ms
2023-06-22 15:25:37.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:25:37.202 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2023-06-22 15:25:37.212 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 15:25:37.224 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:25:37.226 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 31.6478ms
2023-06-22 15:25:52.086 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:25:52.204 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:25:52.209 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 15:26:00.842 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 8631.5028ms
2023-06-22 15:26:00.845 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:26:00.865 +03:00 [ERR] There was an error.
System.FormatException: Input string was not in a correct format.
   at System.Number.ThrowOverflowOrFormatException(ParsingStatus status, TypeCode type)
   at System.Int32.Parse(String s)
   at ExpenseMaster.BusinessLogic.Implementations.TokenService.GetUserIdFromClaims(ClaimsPrincipal claimsPrincipal) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\TokenService.cs:line 53
   at ExpenseMaster.Controllers.ProfileController.GetProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 25
   at lambda_method152(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
2023-06-22 15:26:00.945 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - - 8859.3720ms
2023-06-22 15:27:23.508 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:27:23.910 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:27:23.958 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:27:24.024 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:27:24.215 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:27:24.216 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:27:24.221 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:27:24.222 +03:00 [INF] Hosting environment: Development
2023-06-22 15:27:24.223 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:27:25.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:27:26.271 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 690.6262ms
2023-06-22 15:27:26.321 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:27:26.329 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 7.9820ms
2023-06-22 15:27:26.448 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:27:26.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 182.5719ms
2023-06-22 15:27:38.836 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 15:27:38.847 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:27:38.888 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:27:39.608 +03:00 [INF] Executed DbCommand (85ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:27:41.692 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:27:41.719 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 2823.3033ms
2023-06-22 15:27:41.729 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:27:41.753 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 2917.8276ms
2023-06-22 15:27:52.641 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 15:27:52.666 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 15:27:52.681 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:27:52.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 401 0 - 41.0489ms
2023-06-22 15:28:06.174 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 15:28:06.269 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 15:28:06.274 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExpenseMaster.BusinessLogic.Dto.UserDto]]] GetAllUsers() on controller ExpenseMaster.Controllers.UserController (ExpenseMaster).
2023-06-22 15:28:06.278 +03:00 [INF] Executed action ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster) in 1.8895ms
2023-06-22 15:28:06.279 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 15:28:06.322 +03:00 [ERR] There was an error.
System.InvalidOperationException: Unable to resolve service for type 'ExpenseMaster.BusinessLogic.Interfaces.IUserService' while attempting to activate 'ExpenseMaster.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method156(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
2023-06-22 15:28:06.389 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 500 - - 215.0803ms
2023-06-22 15:28:34.061 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:28:34.235 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:28:34.259 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:28:34.302 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:28:34.474 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:28:34.475 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:28:34.479 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:28:34.480 +03:00 [INF] Hosting environment: Development
2023-06-22 15:28:34.481 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:28:35.625 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:28:36.214 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 606.9366ms
2023-06-22 15:28:36.297 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:28:36.306 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.8870ms
2023-06-22 15:28:36.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:28:36.576 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 185.5368ms
2023-06-22 15:28:48.003 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 15:28:48.018 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:28:48.062 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:28:48.697 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:28:52.258 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:28:52.288 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 4212.5348ms
2023-06-22 15:28:52.295 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:28:52.313 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 4310.3043ms
2023-06-22 15:29:01.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 15:29:01.831 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 15:29:01.843 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:29:01.845 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 401 0 - 27.2730ms
2023-06-22 15:29:14.631 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 15:29:14.748 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 15:29:14.755 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExpenseMaster.BusinessLogic.Dto.UserDto]]] GetAllUsers() on controller ExpenseMaster.Controllers.UserController (ExpenseMaster).
2023-06-22 15:29:14.757 +03:00 [INF] Executed action ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster) in 0.7594ms
2023-06-22 15:29:14.759 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 15:29:14.806 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ExpenseMaster.BusinessLogic.Interfaces.IUserService' while attempting to activate 'ExpenseMaster.Controllers.UserController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method156(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass7_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 15:29:14.856 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 500 - text/plain;+charset=utf-8 225.6112ms
2023-06-22 15:30:03.053 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:30:03.307 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:30:03.335 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:30:03.374 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:30:03.549 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:30:03.550 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:30:03.555 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:30:03.556 +03:00 [INF] Hosting environment: Development
2023-06-22 15:30:03.557 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:30:04.697 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:30:05.344 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 656.8284ms
2023-06-22 15:30:05.402 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:30:05.414 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 12.6613ms
2023-06-22 15:30:05.563 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:30:05.780 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 216.9658ms
2023-06-22 15:30:17.334 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 15:30:17.350 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:30:17.392 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:30:17.992 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:30:18.217 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:30:18.236 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 835.1541ms
2023-06-22 15:30:18.239 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:30:18.255 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 921.0228ms
2023-06-22 15:30:26.226 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 15:30:26.239 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2023-06-22 15:30:26.251 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:30:26.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 401 0 - 26.0232ms
2023-06-22 15:30:32.928 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 15:30:33.045 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 15:30:33.049 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExpenseMaster.BusinessLogic.Dto.UserDto]]] GetAllUsers() on controller ExpenseMaster.Controllers.UserController (ExpenseMaster).
2023-06-22 15:30:33.141 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
2023-06-22 15:30:33.146 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ExpenseMaster.BusinessLogic.Dto.UserDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 15:30:33.148 +03:00 [INF] Executed action ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster) in 96.893ms
2023-06-22 15:30:33.149 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 15:30:33.150 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 200 - application/json;+charset=utf-8 221.5421ms
2023-06-22 15:30:46.089 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:30:46.096 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:30:46.102 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 15:30:46.188 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 82.6365ms
2023-06-22 15:30:46.189 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:30:46.226 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.Number.ThrowOverflowOrFormatException(ParsingStatus status, TypeCode type)
   at System.Int32.Parse(String s)
   at ExpenseMaster.BusinessLogic.Implementations.TokenService.GetUserIdFromClaims(ClaimsPrincipal claimsPrincipal) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\TokenService.cs:line 53
   at ExpenseMaster.Controllers.ProfileController.GetProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 25
   at lambda_method163(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 15:30:46.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 193.3119ms
2023-06-22 15:31:06.126 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:31:06.128 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:31:06.129 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 15:31:11.505 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 5373.8178ms
2023-06-22 15:31:11.509 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:31:11.554 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.Number.ThrowOverflowOrFormatException(ParsingStatus status, TypeCode type)
   at System.Int32.Parse(String s)
   at ExpenseMaster.BusinessLogic.Implementations.TokenService.GetUserIdFromClaims(ClaimsPrincipal claimsPrincipal) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\TokenService.cs:line 53
   at ExpenseMaster.Controllers.ProfileController.GetProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 25
   at lambda_method163(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 15:31:11.564 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 5438.7897ms
2023-06-22 15:38:27.585 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:38:27.792 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:38:27.817 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:38:27.858 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:38:28.036 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:38:28.036 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:38:28.040 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:38:28.041 +03:00 [INF] Hosting environment: Development
2023-06-22 15:38:28.042 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:38:29.339 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:38:30.046 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 719.0357ms
2023-06-22 15:38:30.098 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:38:30.114 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 15.8619ms
2023-06-22 15:38:30.237 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:38:30.430 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 192.9575ms
2023-06-22 15:38:34.912 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 15:38:34.923 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:38:34.962 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:38:35.589 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:38:35.849 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:38:35.871 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 897.2056ms
2023-06-22 15:38:35.875 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:38:35.886 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 974.1851ms
2023-06-22 15:38:52.484 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:38:52.589 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:38:52.594 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 15:40:03.120 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 70523.5932ms
2023-06-22 15:40:03.124 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:40:03.170 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.Number.ThrowOverflowOrFormatException(ParsingStatus status, TypeCode type)
   at System.Int32.Parse(String s)
   at ExpenseMaster.BusinessLogic.Implementations.TokenService.GetUserIdFromClaims(ClaimsPrincipal claimsPrincipal) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\TokenService.cs:line 53
   at ExpenseMaster.Controllers.ProfileController.GetProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 25
   at lambda_method152(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 15:40:03.267 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 70782.6593ms
2023-06-22 15:52:38.591 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:52:38.768 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:52:38.796 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:52:38.844 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:52:39.086 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:52:39.100 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:52:39.104 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:52:39.105 +03:00 [INF] Hosting environment: Development
2023-06-22 15:52:39.106 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:52:40.276 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:52:41.449 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:52:41.462 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1191.8567ms
2023-06-22 15:52:41.493 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 43.7503ms
2023-06-22 15:52:41.621 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:52:41.950 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 328.7059ms
2023-06-22 15:52:45.099 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 15:52:45.111 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:52:45.158 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:52:45.854 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:52:46.132 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:52:46.158 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 988.9213ms
2023-06-22 15:52:46.162 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:52:46.177 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1078.1438ms
2023-06-22 15:53:07.604 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:53:07.615 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2023-06-22 15:53:07.622 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-22 15:53:07.636 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-22 15:53:07.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 401 0 - 33.2755ms
2023-06-22 15:53:33.848 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:53:33.948 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:53:33.953 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 15:53:45.894 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-06-22 15:53:45.897 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 11942.0766ms
2023-06-22 15:53:45.899 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:53:45.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - text/plain;+charset=utf-8 12052.3686ms
2023-06-22 15:57:55.192 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:57:55.389 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:57:55.412 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 15:57:55.457 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 15:57:55.720 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 15:57:55.721 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 15:57:55.725 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 15:57:55.726 +03:00 [INF] Hosting environment: Development
2023-06-22 15:57:55.726 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 15:57:57.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 15:57:58.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 777.9832ms
2023-06-22 15:57:58.147 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 15:57:58.157 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 10.1039ms
2023-06-22 15:57:58.281 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 15:57:58.493 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 211.6984ms
2023-06-22 15:58:04.487 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 15:58:04.505 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:58:04.548 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 15:58:05.221 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 15:58:05.474 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 15:58:05.498 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 940.1952ms
2023-06-22 15:58:05.503 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 15:58:05.516 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1028.7410ms
2023-06-22 15:58:24.616 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 15:58:24.728 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:58:24.731 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 15:58:24.884 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Threading.Tasks.Task`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 15:58:24.921 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 188.3906ms
2023-06-22 15:58:24.925 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 15:58:24.957 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (Missing type map configuration or unsupported mapping.

Mapping types:
EntityQueryable`1 -> UserRegistrationDto
Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[ExpenseMaster.DAL.Models.User, ExpenseMaster.DAL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto)
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
EntityQueryable`1 -> UserRegistrationDto
Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1[[ExpenseMaster.DAL.Models.User, ExpenseMaster.DAL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto
   at lambda_method157(Closure , Object , UserRegistrationDto , ResolutionContext )
   at ExpenseMaster.BusinessLogic.Implementations.ProfileService.GetUserByLoginAsync(String login) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\ProfileService.cs:line 70
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 15:58:25.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 435.7098ms
2023-06-22 16:00:04.519 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:00:04.728 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:00:04.750 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:00:04.794 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 16:00:05.030 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 16:00:05.031 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 16:00:05.037 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 16:00:05.038 +03:00 [INF] Hosting environment: Development
2023-06-22 16:00:05.039 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 16:00:06.401 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 16:00:07.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 780.3450ms
2023-06-22 16:00:07.225 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 16:00:07.233 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.4091ms
2023-06-22 16:00:07.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 16:00:07.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 229.8936ms
2023-06-22 16:00:12.022 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 16:00:12.039 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:00:12.092 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 16:00:12.789 +03:00 [INF] Executed DbCommand (84ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 16:00:13.055 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 16:00:13.080 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 977.3531ms
2023-06-22 16:00:13.084 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:00:13.101 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1078.9358ms
2023-06-22 16:00:26.320 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 16:00:26.428 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:00:26.432 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 16:01:10.939 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 16:01:11.028 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 44593.52ms
2023-06-22 16:01:11.033 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:01:11.082 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 16:01:11.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 44845.8262ms
2023-06-22 16:14:17.606 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:14:17.846 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:14:17.872 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:14:17.922 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 16:14:18.212 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 16:14:18.213 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 16:14:18.217 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 16:14:18.218 +03:00 [INF] Hosting environment: Development
2023-06-22 16:14:18.219 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 16:14:20.086 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 16:14:21.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1882.6635ms
2023-06-22 16:14:22.045 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 16:14:22.057 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 12.6130ms
2023-06-22 16:14:22.506 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 16:14:22.695 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 188.6072ms
2023-06-22 16:14:27.314 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 16:14:27.326 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:14:27.379 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 16:14:28.190 +03:00 [INF] Executed DbCommand (192ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 16:14:28.707 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 16:14:28.727 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 1338.3673ms
2023-06-22 16:14:28.730 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:14:28.741 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1427.6276ms
2023-06-22 16:14:41.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 16:14:41.785 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:14:41.788 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 16:14:41.853 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExpenseMaster.BusinessLogic.Implementations.ProfileService+<GetUserByIdAsync>d__5, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 16:14:41.861 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 16:14:41.888 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 98.2895ms
2023-06-22 16:14:41.891 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:14:41.966 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 16:14:42.064 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 394.2610ms
2023-06-22 16:37:00.248 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:37:00.514 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:37:00.556 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:37:00.607 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 16:37:00.850 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 16:37:00.851 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 16:37:00.856 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 16:37:00.857 +03:00 [INF] Hosting environment: Development
2023-06-22 16:37:00.858 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 16:37:02.138 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 16:37:03.290 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1157.9886ms
2023-06-22 16:37:03.356 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 16:37:03.368 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 11.9481ms
2023-06-22 16:37:03.497 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 16:37:03.713 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 216.5507ms
2023-06-22 16:37:09.386 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 16:37:09.401 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:37:09.447 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 16:37:10.091 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 16:37:10.357 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 16:37:10.378 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 921.3102ms
2023-06-22 16:37:10.382 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:37:10.397 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1011.0924ms
2023-06-22 16:37:34.459 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 16:37:34.563 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:37:34.568 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 16:37:50.151 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 16:37:50.158 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 16:37:50.198 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 15627.6154ms
2023-06-22 16:37:50.201 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:37:50.246 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 16:37:50.348 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 15889.3293ms
2023-06-22 16:48:09.934 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:48:10.240 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:48:10.283 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:48:10.355 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 16:48:10.660 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 16:48:10.661 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 16:48:10.665 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 16:48:10.666 +03:00 [INF] Hosting environment: Development
2023-06-22 16:48:10.667 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 16:48:12.281 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 16:48:13.134 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 863.9167ms
2023-06-22 16:48:13.189 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 16:48:13.199 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.8091ms
2023-06-22 16:48:13.335 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 16:48:13.628 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 292.9590ms
2023-06-22 16:48:41.339 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 16:48:41.358 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:48:41.420 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 16:48:42.139 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 16:48:42.419 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 16:48:42.439 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 1009.6525ms
2023-06-22 16:48:42.442 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:48:42.457 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1118.5703ms
2023-06-22 16:48:59.336 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 16:48:59.471 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:48:59.475 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 16:49:05.827 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 16:49:06.632 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExpenseMaster.BusinessLogic.Implementations.ProfileService+<GetUserByIdAsync>d__5, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 16:49:06.717 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 7239.0413ms
2023-06-22 16:49:06.722 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:49:06.779 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 16:49:06.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 7547.6562ms
2023-06-22 16:50:24.053 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 16:50:24.056 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:50:24.057 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 16:51:53.304 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 16:53:14.293 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExpenseMaster.BusinessLogic.Implementations.ProfileService+<GetUserByIdAsync>d__5, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 16:53:14.313 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 170255.4007ms
2023-06-22 16:53:14.317 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:53:15.628 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 16:53:15.640 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 171586.9220ms
2023-06-22 16:53:18.119 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 16:53:18.122 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:53:18.126 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 16:54:17.606 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 16:54:17.623 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 16:54:37.654 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 79522.8868ms
2023-06-22 16:57:39.643 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 16:57:39.662 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 16:57:39.677 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 261557.9287ms
2023-06-22 16:58:50.970 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:58:51.166 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:58:51.188 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 16:58:51.234 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 16:58:51.410 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 16:58:51.411 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 16:58:51.416 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 16:58:51.417 +03:00 [INF] Hosting environment: Development
2023-06-22 16:58:51.418 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 16:58:52.672 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 16:58:53.477 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 810.9378ms
2023-06-22 16:58:53.531 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 16:58:53.539 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.4116ms
2023-06-22 16:58:53.700 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 16:58:53.932 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 232.0324ms
2023-06-22 16:59:32.203 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 16:59:32.213 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:59:32.256 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 16:59:32.902 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 16:59:33.188 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 16:59:33.209 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 944.0982ms
2023-06-22 16:59:33.214 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 16:59:33.230 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1027.4194ms
2023-06-22 16:59:51.029 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 16:59:51.143 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 16:59:51.146 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExpenseMaster.BusinessLogic.Dto.UserDto]]] GetAllUsers() on controller ExpenseMaster.Controllers.UserController (ExpenseMaster).
2023-06-22 16:59:51.261 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
2023-06-22 16:59:51.264 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ExpenseMaster.BusinessLogic.Dto.UserDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 16:59:51.266 +03:00 [INF] Executed action ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster) in 118.2112ms
2023-06-22 16:59:51.267 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 16:59:51.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 200 - application/json;+charset=utf-8 238.9922ms
2023-06-22 17:00:20.309 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/User application/json 88
2023-06-22 17:00:20.316 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.UserController.UpdateUserAsync (ExpenseMaster)'
2023-06-22 17:00:20.318 +03:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserDto]] UpdateUserAsync(ExpenseMaster.BusinessLogic.Dto.UserUpdateDto) on controller ExpenseMaster.Controllers.UserController (ExpenseMaster).
2023-06-22 17:00:20.509 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [Login] = @p1, [PasswordHash] = @p2, [PasswordSalt] = @p3, [RoleId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2023-06-22 17:00:20.542 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.UserDto'.
2023-06-22 17:00:20.544 +03:00 [INF] Executed action ExpenseMaster.Controllers.UserController.UpdateUserAsync (ExpenseMaster) in 223.6624ms
2023-06-22 17:00:20.545 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.UserController.UpdateUserAsync (ExpenseMaster)'
2023-06-22 17:00:20.546 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/User application/json 88 - 200 - application/json;+charset=utf-8 236.9378ms
2023-06-22 17:00:26.448 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 17:00:26.450 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 17:00:26.452 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExpenseMaster.BusinessLogic.Dto.UserDto]]] GetAllUsers() on controller ExpenseMaster.Controllers.UserController (ExpenseMaster).
2023-06-22 17:00:26.476 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
2023-06-22 17:00:26.478 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ExpenseMaster.BusinessLogic.Dto.UserDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 17:00:26.479 +03:00 [INF] Executed action ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster) in 16.129ms
2023-06-22 17:00:26.480 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 17:00:26.481 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 200 - application/json;+charset=utf-8 33.4349ms
2023-06-22 17:05:32.899 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:05:33.094 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:05:33.119 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:05:33.164 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:05:33.396 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:05:33.397 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:05:33.402 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:05:33.403 +03:00 [INF] Hosting environment: Development
2023-06-22 17:05:33.404 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:05:34.469 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:05:35.295 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 837.4759ms
2023-06-22 17:05:35.393 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:05:35.410 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 17.2274ms
2023-06-22 17:05:35.531 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:05:35.779 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 248.3405ms
2023-06-22 17:05:38.927 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 17:05:38.943 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:05:38.996 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:05:39.684 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:05:39.938 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:05:39.959 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 952.8671ms
2023-06-22 17:05:39.962 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:05:39.980 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1053.2395ms
2023-06-22 17:06:11.206 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:06:11.216 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:06:11.219 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:06:11.300 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:06:11.303 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:06:11.305 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 83.932ms
2023-06-22 17:06:11.307 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:06:11.308 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 102.2800ms
2023-06-22 17:07:12.383 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:07:12.514 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:07:12.517 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:07:56.490 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:07:56.492 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 17:14:09.311 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:14:09.488 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:14:09.520 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:14:09.563 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:14:09.734 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:14:09.736 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:14:09.742 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:14:09.746 +03:00 [INF] Hosting environment: Development
2023-06-22 17:14:09.748 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:14:11.061 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:14:11.817 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 767.2253ms
2023-06-22 17:14:11.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:14:11.916 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 13.9333ms
2023-06-22 17:14:12.044 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:14:12.265 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 220.9790ms
2023-06-22 17:14:27.391 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:14:27.406 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:14:27.455 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:14:28.110 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:14:28.379 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:14:28.399 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 935.5772ms
2023-06-22 17:14:28.402 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:14:28.414 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1024.0925ms
2023-06-22 17:14:43.450 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:14:43.545 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:14:43.550 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:14:58.978 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:14:58.979 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 17:26:39.966 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:26:40.218 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:26:40.241 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:26:40.286 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:26:40.534 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:26:40.535 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:26:40.540 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:26:40.543 +03:00 [INF] Hosting environment: Development
2023-06-22 17:26:40.544 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:26:42.071 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:26:43.174 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1111.4012ms
2023-06-22 17:26:43.232 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:26:43.244 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 12.2459ms
2023-06-22 17:26:43.371 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:26:43.568 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 196.3085ms
2023-06-22 17:26:49.143 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 17:26:49.161 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:26:49.215 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:26:49.916 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:26:50.191 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:26:50.210 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 986.4604ms
2023-06-22 17:26:50.215 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:26:50.228 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 1084.7465ms
2023-06-22 17:27:37.814 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:27:37.927 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:27:37.930 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:27:54.183 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:27:54.184 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 17:28:16.629 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 38696.7882ms
2023-06-22 17:28:16.632 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:28:16.665 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 17:28:16.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 38942.6915ms
2023-06-22 17:30:04.984 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:30:05.223 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:30:05.248 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:30:05.293 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:30:05.539 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:30:05.540 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:30:05.547 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:30:05.549 +03:00 [INF] Hosting environment: Development
2023-06-22 17:30:05.549 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:30:07.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:30:07.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 830.6302ms
2023-06-22 17:30:07.909 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:30:07.922 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 13.3452ms
2023-06-22 17:30:08.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:30:08.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 240.1189ms
2023-06-22 17:30:23.005 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:30:23.014 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:30:23.054 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:30:23.662 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:30:23.962 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:30:23.982 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 919.979ms
2023-06-22 17:30:23.986 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:30:23.998 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1017.5240ms
2023-06-22 17:30:39.605 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:30:39.715 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:30:39.719 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:30:48.313 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:30:48.315 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 17:34:37.753 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:34:37.969 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:34:37.997 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:34:38.043 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:34:38.362 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:34:38.363 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:34:38.371 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:34:38.373 +03:00 [INF] Hosting environment: Development
2023-06-22 17:34:38.374 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:34:40.250 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:34:41.271 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1028.9195ms
2023-06-22 17:34:41.358 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:34:41.367 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.2124ms
2023-06-22 17:34:41.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:34:41.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 203.5157ms
2023-06-22 17:34:53.636 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:34:53.649 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:34:53.690 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:34:54.318 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:34:54.553 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:34:54.573 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 873.8522ms
2023-06-22 17:34:54.577 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:34:54.589 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 952.8464ms
2023-06-22 17:35:08.698 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:35:08.819 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:35:08.823 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:35:18.884 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:35:18.885 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 17:35:26.720 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 17895.4361ms
2023-06-22 17:35:26.723 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:35:26.749 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 17:35:26.839 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 18142.4221ms
2023-06-22 17:39:25.567 +03:00 [INF] Executed DbCommand (116ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:39:25.908 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:39:25.957 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:39:26.035 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:39:26.330 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:39:26.341 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:39:26.355 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:39:26.358 +03:00 [INF] Hosting environment: Development
2023-06-22 17:39:26.359 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:39:27.689 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:39:28.449 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 767.5089ms
2023-06-22 17:39:28.501 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:39:28.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 7.8429ms
2023-06-22 17:39:28.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:39:28.866 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 228.5552ms
2023-06-22 17:39:41.394 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:39:41.408 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:39:41.442 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:39:42.034 +03:00 [INF] Executed DbCommand (88ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:39:42.289 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:39:42.310 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 857.8013ms
2023-06-22 17:39:42.314 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:39:42.329 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 934.9563ms
2023-06-22 17:39:56.268 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:39:56.373 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:39:56.378 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:40:11.332 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:40:11.334 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 17:40:48.440 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 52060.277ms
2023-06-22 17:40:48.443 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:40:48.467 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 17:40:48.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 52280.3474ms
2023-06-22 17:43:59.085 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:43:59.334 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:43:59.363 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:43:59.410 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:43:59.631 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:43:59.633 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:43:59.639 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:43:59.641 +03:00 [INF] Hosting environment: Development
2023-06-22 17:43:59.642 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:44:01.108 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:44:01.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 783.5715ms
2023-06-22 17:44:01.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:44:01.947 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.7467ms
2023-06-22 17:44:02.057 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:44:02.297 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 239.3199ms
2023-06-22 17:44:15.091 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:44:15.109 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:44:15.152 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:44:15.741 +03:00 [INF] Executed DbCommand (83ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:44:15.983 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:44:16.003 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 841.1198ms
2023-06-22 17:44:16.007 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:44:16.018 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 927.2973ms
2023-06-22 17:44:33.752 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:44:33.882 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:44:33.889 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:44:40.893 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:44:40.893 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 17:47:41.542 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:47:41.774 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:47:41.800 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:47:41.842 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:47:42.036 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:47:42.037 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:47:42.042 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:47:42.043 +03:00 [INF] Hosting environment: Development
2023-06-22 17:47:42.044 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:47:43.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:47:44.254 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 829.7471ms
2023-06-22 17:47:44.342 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:47:44.376 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 34.2555ms
2023-06-22 17:47:44.499 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:47:44.757 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 257.8933ms
2023-06-22 17:47:56.494 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:47:56.508 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:47:56.569 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:47:57.218 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:47:57.480 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:47:57.499 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 921.3706ms
2023-06-22 17:47:57.502 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:47:57.515 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1021.1426ms
2023-06-22 17:48:14.181 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:48:14.291 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:48:14.295 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:48:17.160 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExpenseMaster.BusinessLogic.Implementations.ProfileService+<GetUserByIdAsync>d__5, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 17:48:17.160 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:48:17.195 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 2896.3624ms
2023-06-22 17:48:17.197 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:48:17.223 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 17:48:17.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 3118.4605ms
2023-06-22 17:50:21.272 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:50:21.506 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:50:21.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:50:21.578 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:50:21.786 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:50:21.787 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:50:21.793 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:50:21.795 +03:00 [INF] Hosting environment: Development
2023-06-22 17:50:21.796 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:50:23.059 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:50:24.344 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:50:24.347 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1296.6950ms
2023-06-22 17:50:24.361 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 16.9082ms
2023-06-22 17:50:24.429 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:50:24.634 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 204.2460ms
2023-06-22 17:50:37.184 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:50:37.195 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:50:37.233 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:50:37.877 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:50:38.139 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:50:38.163 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 920.9345ms
2023-06-22 17:50:38.168 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:50:38.182 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 997.6785ms
2023-06-22 17:50:51.701 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:50:51.809 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:50:51.813 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:50:54.139 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExpenseMaster.BusinessLogic.Implementations.ProfileService+<GetUserByIdAsync>d__5, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 17:50:54.143 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:50:54.173 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 2357.648ms
2023-06-22 17:50:54.174 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:50:54.199 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 17:50:54.279 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 2577.9158ms
2023-06-22 17:54:09.055 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:54:09.292 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:54:09.318 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:54:09.363 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:54:09.572 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:54:09.580 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:54:09.586 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:54:09.588 +03:00 [INF] Hosting environment: Development
2023-06-22 17:54:09.589 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:54:11.064 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:54:11.850 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 802.6821ms
2023-06-22 17:54:11.911 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:54:11.920 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.9259ms
2023-06-22 17:54:12.034 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:54:12.239 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 205.4281ms
2023-06-22 17:54:26.129 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:54:26.164 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:54:26.212 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:54:27.068 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:54:27.483 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2023-06-22 17:54:27.494 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 1272.5149ms
2023-06-22 17:54:27.497 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:54:27.512 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 400 - text/plain;+charset=utf-8 1383.6867ms
2023-06-22 17:54:49.690 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:54:49.900 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:54:49.934 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 17:54:50.036 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 17:54:50.250 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 17:54:50.250 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 17:54:50.256 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 17:54:50.257 +03:00 [INF] Hosting environment: Development
2023-06-22 17:54:50.258 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 17:54:51.327 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 17:54:52.110 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 792.8398ms
2023-06-22 17:54:52.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 17:54:52.174 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 10.8621ms
2023-06-22 17:54:52.306 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 17:54:52.511 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 205.5802ms
2023-06-22 17:55:04.336 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 17:55:04.349 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:55:04.385 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 17:55:05.050 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 17:55:05.328 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 17:55:05.349 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 955.3169ms
2023-06-22 17:55:05.354 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 17:55:05.371 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1035.5052ms
2023-06-22 17:55:22.596 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 17:55:22.704 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:55:22.709 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 17:55:27.295 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 17:55:27.296 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 17:55:29.487 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 6775.4989ms
2023-06-22 17:55:29.488 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 17:55:29.526 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 17:55:29.642 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 7046.2046ms
2023-06-22 18:00:49.723 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 18:00:49.973 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 18:00:50.003 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 18:00:50.052 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 18:00:50.281 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 18:00:50.282 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 18:00:50.298 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 18:00:50.300 +03:00 [INF] Hosting environment: Development
2023-06-22 18:00:50.301 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 18:00:51.780 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 18:00:52.520 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 747.5172ms
2023-06-22 18:00:52.565 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 18:00:52.575 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.3664ms
2023-06-22 18:00:52.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 18:00:52.907 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 224.1139ms
2023-06-22 18:01:07.114 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 18:01:07.127 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 18:01:07.166 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 18:01:07.832 +03:00 [INF] Executed DbCommand (93ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 18:01:08.108 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 18:01:08.131 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 953.1527ms
2023-06-22 18:01:08.135 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 18:01:08.151 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1036.7727ms
2023-06-22 18:01:24.261 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 18:01:24.385 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 18:01:24.389 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 18:01:26.889 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExpenseMaster.BusinessLogic.Implementations.ProfileService+<GetUserByIdAsync>d__5, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 18:01:26.897 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 18:01:26.921 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 2529.6242ms
2023-06-22 18:01:26.923 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 18:01:26.947 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 18:01:27.029 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 2768.1507ms
2023-06-22 18:01:32.389 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 18:01:32.392 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 18:01:32.394 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 18:01:38.229 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 18:01:38.229 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Runtime.CompilerServices.IAsyncStateMachine, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2023-06-22 18:01:59.828 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 27421.6109ms
2023-06-22 18:02:12.609 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 18:02:12.628 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 18:02:12.641 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 40252.3418ms
2023-06-22 18:05:51.605 +03:00 [INF] Executed DbCommand (123ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 18:05:51.877 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 18:05:51.901 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 18:05:51.970 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 18:05:52.226 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 18:05:52.227 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 18:05:52.231 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 18:05:52.233 +03:00 [INF] Hosting environment: Development
2023-06-22 18:05:52.233 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 18:05:53.465 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 18:05:54.149 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 695.0333ms
2023-06-22 18:05:54.209 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 18:05:54.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.6392ms
2023-06-22 18:05:54.329 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 18:05:54.533 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 204.6865ms
2023-06-22 18:06:07.216 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 18:06:07.232 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 18:06:07.294 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 18:06:07.926 +03:00 [INF] Executed DbCommand (97ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 18:06:08.210 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 18:06:08.230 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 928.378ms
2023-06-22 18:06:08.233 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 18:06:08.243 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1028.0280ms
2023-06-22 18:06:21.260 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 18:06:21.375 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 18:06:21.379 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 18:06:21.450 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1+AsyncStateMachineBox`1[[ExpenseMaster.BusinessLogic.Dto.ProfileDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[ExpenseMaster.BusinessLogic.Implementations.ProfileService+<GetUserByIdAsync>d__5, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 18:06:21.453 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 18:07:01.747 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 40366.3853ms
2023-06-22 18:07:01.751 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 18:07:01.777 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported. Path: $.MoveNextAction.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.Action' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 18:07:01.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 40617.5287ms
2023-06-22 19:48:11.047 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 19:48:11.309 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 19:48:11.344 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 19:48:11.420 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 19:48:11.810 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 19:48:11.811 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 19:48:11.815 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 19:48:11.817 +03:00 [INF] Hosting environment: Development
2023-06-22 19:48:11.818 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 19:48:13.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 19:48:14.265 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1190.0197ms
2023-06-22 19:48:14.317 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 19:48:14.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.1698ms
2023-06-22 19:48:14.440 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 19:48:14.661 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 220.7416ms
2023-06-22 19:48:26.522 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 19:48:26.539 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 19:48:26.590 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 19:48:27.255 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 19:48:27.551 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 19:48:27.573 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 972.9495ms
2023-06-22 19:48:27.580 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 19:48:27.595 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1072.8414ms
2023-06-22 19:48:43.391 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 19:48:43.502 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 19:48:43.506 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 19:48:43.577 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 19:48:46.133 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 19:48:46.135 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 2627.0663ms
2023-06-22 19:48:46.137 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 19:48:46.139 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 2748.9096ms
2023-06-22 19:56:47.209 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 19:56:47.391 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 19:56:47.418 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 19:56:47.467 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 19:56:47.718 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 19:56:47.719 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 19:56:47.723 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 19:56:47.724 +03:00 [INF] Hosting environment: Development
2023-06-22 19:56:47.724 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 19:56:48.976 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 19:56:49.787 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 824.0289ms
2023-06-22 19:56:49.890 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 19:56:49.904 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 13.3695ms
2023-06-22 19:56:50.129 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 19:56:50.443 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 313.8462ms
2023-06-22 19:57:04.236 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 19:57:04.248 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 19:57:04.306 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 19:57:04.968 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 19:57:05.264 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 19:57:05.284 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 968.8473ms
2023-06-22 19:57:05.288 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 19:57:05.302 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1065.7866ms
2023-06-22 19:57:21.745 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 19:57:21.855 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 19:57:21.863 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 19:57:21.928 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 19:57:21.934 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 19:57:21.936 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 70.0875ms
2023-06-22 19:57:21.937 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 19:57:21.939 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 194.2920ms
2023-06-22 19:57:40.964 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile application/json 50
2023-06-22 19:57:40.966 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 19:57:40.971 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdateProfileAsync(ExpenseMaster.BusinessLogic.Dto.ProfileDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 19:57:40.988 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 19:57:41.130 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster) in 156.0623ms
2023-06-22 19:57:41.132 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 19:57:41.266 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
ProfileDto -> User
ExpenseMaster.BusinessLogic.Dto.ProfileDto -> ExpenseMaster.DAL.Models.User
   at lambda_method170(Closure , ProfileDto , User , ResolutionContext )
   at ExpenseMaster.BusinessLogic.Implementations.ProfileService.UpdateProfileAsync(ProfileDto profileDto, Int32 userId) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\ProfileService.cs:line 25
   at ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync(ProfileDto profileDto) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 37
   at lambda_method163(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 19:57:41.366 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile application/json 50 - 500 - text/plain;+charset=utf-8 401.5310ms
2023-06-22 20:00:34.837 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:00:35.087 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:00:35.111 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:00:35.154 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 20:00:35.389 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 20:00:35.392 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 20:00:35.400 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 20:00:35.402 +03:00 [INF] Hosting environment: Development
2023-06-22 20:00:35.403 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 20:00:36.678 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 20:00:38.021 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1352.1242ms
2023-06-22 20:00:38.071 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 20:00:38.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.5106ms
2023-06-22 20:00:38.220 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 20:00:38.444 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 224.8894ms
2023-06-22 20:00:52.978 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 51
2023-06-22 20:00:52.993 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:00:53.033 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:00:53.732 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:00:53.999 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 20:00:54.019 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 975.2713ms
2023-06-22 20:00:54.023 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:00:54.039 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 51 - 200 - application/json;+charset=utf-8 1060.7392ms
2023-06-22 20:01:11.913 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:01:12.035 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:01:12.039 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:01:12.139 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:01:12.145 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:01:12.147 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 106.248ms
2023-06-22 20:01:12.149 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:01:12.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 239.6616ms
2023-06-22 20:01:23.606 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile application/json 50
2023-06-22 20:01:23.608 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:01:23.612 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdateProfileAsync(ExpenseMaster.BusinessLogic.Dto.ProfileDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:01:23.633 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:01:23.850 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [Login] = @p1, [PasswordHash] = @p2, [PasswordSalt] = @p3, [RoleId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2023-06-22 20:01:23.887 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:01:23.888 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster) in 270.6904ms
2023-06-22 20:01:23.889 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:01:23.890 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile application/json 50 - 200 - application/json;+charset=utf-8 284.0406ms
2023-06-22 20:01:29.947 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:01:29.950 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:01:29.951 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:01:29.968 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:01:29.969 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:01:29.970 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 18.1801ms
2023-06-22 20:01:29.971 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:01:29.972 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 24.3849ms
2023-06-22 20:01:45.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 20:01:45.641 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 20:01:45.646 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExpenseMaster.BusinessLogic.Dto.UserDto]]] GetAllUsers() on controller ExpenseMaster.Controllers.UserController (ExpenseMaster).
2023-06-22 20:01:45.687 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
2023-06-22 20:01:45.691 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ExpenseMaster.BusinessLogic.Dto.UserDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 20:01:45.694 +03:00 [INF] Executed action ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster) in 45.987ms
2023-06-22 20:01:45.695 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 20:01:45.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 200 - application/json;+charset=utf-8 58.5074ms
2023-06-22 20:04:33.597 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:04:33.935 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:04:33.996 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:04:34.041 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 20:04:34.232 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 20:04:34.233 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 20:04:34.239 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 20:04:34.240 +03:00 [INF] Hosting environment: Development
2023-06-22 20:04:34.240 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 20:04:35.761 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 20:04:37.034 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1285.7000ms
2023-06-22 20:04:37.076 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 20:04:37.082 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 6.4318ms
2023-06-22 20:04:37.219 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 20:04:37.425 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 206.0606ms
2023-06-22 20:04:40.819 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 20:04:40.831 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:04:40.879 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:04:41.533 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:04:41.781 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 20:04:41.800 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 909.6889ms
2023-06-22 20:04:41.805 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:04:41.818 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 999.2940ms
2023-06-22 20:04:57.661 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:04:57.771 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:04:57.774 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:04:57.843 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:04:57.849 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:04:57.850 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 73.9682ms
2023-06-22 20:04:57.851 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:04:57.853 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 191.7465ms
2023-06-22 20:05:05.265 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile application/json 45
2023-06-22 20:05:05.267 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:05:05.271 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdateProfileAsync(ExpenseMaster.BusinessLogic.Dto.ProfileDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:05:05.284 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:05:05.436 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [Login] = @p1, [PasswordHash] = @p2, [PasswordSalt] = @p3, [RoleId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2023-06-22 20:05:05.468 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:05:05.469 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster) in 192.9755ms
2023-06-22 20:05:05.471 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:05:05.475 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile application/json 45 - 200 - application/json;+charset=utf-8 210.1346ms
2023-06-22 20:05:14.505 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile application/json 46
2023-06-22 20:05:14.507 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:05:14.508 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdateProfileAsync(ExpenseMaster.BusinessLogic.Dto.ProfileDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:05:14.526 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:05:14.533 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [Login] = @p1, [PasswordHash] = @p2, [PasswordSalt] = @p3, [RoleId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2023-06-22 20:05:14.537 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:05:14.539 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster) in 22.9586ms
2023-06-22 20:05:14.541 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:05:14.543 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile application/json 46 - 200 - application/json;+charset=utf-8 37.7529ms
2023-06-22 20:05:22.974 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile application/json 47
2023-06-22 20:05:22.975 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:05:22.976 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdateProfileAsync(ExpenseMaster.BusinessLogic.Dto.ProfileDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:05:22.994 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:05:23.008 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [Login] = @p1, [PasswordHash] = @p2, [PasswordSalt] = @p3, [RoleId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2023-06-22 20:05:23.010 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:05:23.011 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster) in 33.1555ms
2023-06-22 20:05:23.012 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:05:23.013 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile application/json 47 - 200 - application/json;+charset=utf-8 39.7990ms
2023-06-22 20:05:28.330 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile application/json 48
2023-06-22 20:05:28.331 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:05:28.333 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdateProfileAsync(ExpenseMaster.BusinessLogic.Dto.ProfileDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:05:28.344 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:05:28.348 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [Login] = @p1, [PasswordHash] = @p2, [PasswordSalt] = @p3, [RoleId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2023-06-22 20:05:28.350 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:05:28.351 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster) in 11.0898ms
2023-06-22 20:05:28.352 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:05:28.353 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile application/json 48 - 200 - application/json;+charset=utf-8 23.3333ms
2023-06-22 20:05:39.236 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7124/Profile - -
2023-06-22 20:05:39.237 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.DeleteProfileAsync (ExpenseMaster)'
2023-06-22 20:05:39.241 +03:00 [INF] Route matched with {action = "DeleteProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeleteProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:05:39.248 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:05:39.407 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.DeleteProfileAsync (ExpenseMaster) in 164.5898ms
2023-06-22 20:05:39.409 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.DeleteProfileAsync (ExpenseMaster)'
2023-06-22 20:05:39.504 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The property 'User.Id' has a temporary value while attempting to change the entity's state to 'Deleted'. Either set a permanent value explicitly, or ensure that the database is configured to generate values for this property.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.set_State(EntityState value)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Remove(TEntity entity)
   at ExpenseMaster.DAL.Repository.RepositoryBase`1.DeleteAsync(T entity) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.DAL\Repository\RepositoryBase.cs:line 39
   at ExpenseMaster.BusinessLogic.Implementations.ProfileService.DeleteProfileAsync(ProfileDto profileDto) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\ProfileService.cs:line 49
   at ExpenseMaster.Controllers.ProfileController.DeleteProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 49
   at lambda_method238(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 20:05:39.606 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 369.8748ms
2023-06-22 20:10:13.384 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:10:13.603 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:10:13.634 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:10:13.681 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 20:10:13.876 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 20:10:13.877 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 20:10:13.883 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 20:10:13.885 +03:00 [INF] Hosting environment: Development
2023-06-22 20:10:13.886 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 20:10:15.521 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 20:10:16.132 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 619.7256ms
2023-06-22 20:10:16.182 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 20:10:16.190 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 8.1118ms
2023-06-22 20:10:16.289 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 20:10:16.488 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 199.9235ms
2023-06-22 20:10:25.495 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 20:10:25.508 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:10:25.552 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:10:26.160 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:10:26.311 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2023-06-22 20:10:26.321 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 759.5388ms
2023-06-22 20:10:26.325 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:10:26.341 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 400 - text/plain;+charset=utf-8 846.9334ms
2023-06-22 20:10:36.300 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 49
2023-06-22 20:10:36.302 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:10:36.304 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:10:36.372 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:10:36.440 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2023-06-22 20:10:36.441 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 135.0612ms
2023-06-22 20:10:36.442 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:10:36.444 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 49 - 400 - text/plain;+charset=utf-8 144.0652ms
2023-06-22 20:10:46.174 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 53
2023-06-22 20:10:46.175 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:10:46.176 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:10:46.199 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:10:46.314 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2023-06-22 20:10:46.316 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 134.9345ms
2023-06-22 20:10:46.317 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:10:46.318 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 53 - 400 - text/plain;+charset=utf-8 144.2429ms
2023-06-22 20:10:59.664 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Registration application/json 68
2023-06-22 20:10:59.665 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster)'
2023-06-22 20:10:59.671 +03:00 [INF] Route matched with {action = "Create", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:10:59.692 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userRegistrationDto_Login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Login] = @__userRegistrationDto_Login_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:10:59.893 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Login], [PasswordHash], [PasswordSalt], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-22 20:10:59.954 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto'.
2023-06-22 20:10:59.966 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster) in 292.321ms
2023-06-22 20:10:59.967 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster)'
2023-06-22 20:10:59.969 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Registration application/json 68 - 200 - application/json;+charset=utf-8 305.0115ms
2023-06-22 20:11:08.051 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 47
2023-06-22 20:11:08.053 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:11:08.056 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:11:08.065 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:11:08.262 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 20:11:08.266 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 207.7076ms
2023-06-22 20:11:08.268 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:11:08.270 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 47 - 200 - application/json;+charset=utf-8 219.2363ms
2023-06-22 20:11:22.597 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:11:22.715 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:11:22.720 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:11:22.735 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:11:22.742 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:11:22.744 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 21.9109ms
2023-06-22 20:11:22.745 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:11:22.748 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 150.3398ms
2023-06-22 20:11:27.955 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7124/Profile - -
2023-06-22 20:11:27.957 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.DeleteProfileAsync (ExpenseMaster)'
2023-06-22 20:11:27.961 +03:00 [INF] Route matched with {action = "DeleteProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeleteProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:11:27.979 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:11:28.024 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p0;
2023-06-22 20:11:28.040 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-06-22 20:11:28.060 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.DeleteProfileAsync (ExpenseMaster) in 95.7055ms
2023-06-22 20:11:28.062 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.DeleteProfileAsync (ExpenseMaster)'
2023-06-22 20:11:28.063 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7124/Profile - - - 401 - application/problem+json;+charset=utf-8 107.9526ms
2023-06-22 20:11:43.705 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:11:43.707 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:11:43.709 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:11:43.721 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:11:43.777 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 66.3023ms
2023-06-22 20:11:43.779 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:11:43.877 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: User with id - 19 not found
   at ExpenseMaster.BusinessLogic.Implementations.ProfileService.GetUserByIdAsync(Int32 id) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\ProfileService.cs:line 61
   at ExpenseMaster.Controllers.ProfileController.GetProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 27
   at lambda_method240(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 20:11:43.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 224.6786ms
2023-06-22 20:12:05.954 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:12:05.958 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:12:05.968 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:12:05.983 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:12:06.042 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 67.9277ms
2023-06-22 20:12:06.044 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:12:06.108 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: User with id - 19 not found
   at ExpenseMaster.BusinessLogic.Implementations.ProfileService.GetUserByIdAsync(Int32 id) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\ProfileService.cs:line 61
   at ExpenseMaster.Controllers.ProfileController.GetProfileAsync() in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 27
   at lambda_method240(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 20:12:06.118 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 500 - text/plain;+charset=utf-8 163.9658ms
2023-06-22 20:23:01.086 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:23:01.313 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:23:01.339 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:23:01.395 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 20:23:01.663 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 20:23:01.663 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 20:23:01.669 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 20:23:01.670 +03:00 [INF] Hosting environment: Development
2023-06-22 20:23:01.671 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 20:23:03.251 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 20:23:04.527 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 1284.1845ms
2023-06-22 20:23:04.574 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 20:23:04.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 9.2744ms
2023-06-22 20:23:04.702 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 20:23:04.929 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 226.8856ms
2023-06-22 20:23:13.987 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 43
2023-06-22 20:23:14.003 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:23:14.055 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:23:14.711 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:23:14.967 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 20:23:14.986 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 920.5999ms
2023-06-22 20:23:14.988 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:23:15.004 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 43 - 200 - application/json;+charset=utf-8 1017.3296ms
2023-06-22 20:23:40.764 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/User - -
2023-06-22 20:23:40.911 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 20:23:40.915 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[ExpenseMaster.BusinessLogic.Dto.UserDto]]] GetAllUsers() on controller ExpenseMaster.Controllers.UserController (ExpenseMaster).
2023-06-22 20:23:41.000 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
2023-06-22 20:23:41.006 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ExpenseMaster.BusinessLogic.Dto.UserDto, ExpenseMaster.BusinessLogic, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-06-22 20:23:41.008 +03:00 [INF] Executed action ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster) in 91.5924ms
2023-06-22 20:23:41.009 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.UserController.GetAllUsers (ExpenseMaster)'
2023-06-22 20:23:41.010 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/User - - - 200 - application/json;+charset=utf-8 246.6333ms
2023-06-22 20:23:47.085 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:23:47.088 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:23:47.092 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:23:47.115 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:23:47.124 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:23:47.126 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 29.0842ms
2023-06-22 20:23:47.131 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:23:47.132 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 47.0179ms
2023-06-22 20:23:59.108 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile application/json 44
2023-06-22 20:23:59.122 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:23:59.128 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdateProfileAsync(ExpenseMaster.BusinessLogic.Dto.ProfileDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:23:59.153 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:23:59.326 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster) in 189.8442ms
2023-06-22 20:23:59.330 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:23:59.491 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Email 'string' is already associated with another user.
   at ExpenseMaster.BusinessLogic.Implementations.ProfileService.UpdateProfileAsync(ProfileDto profileDto, Int32 userId) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\ProfileService.cs:line 35
   at ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync(ProfileDto profileDto) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 37
   at lambda_method174(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 20:23:59.580 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile application/json 44 - 500 - text/plain;+charset=utf-8 472.1685ms
2023-06-22 20:24:07.228 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:24:07.230 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:24:07.232 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:24:07.258 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:24:07.271 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:24:07.273 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 37.5614ms
2023-06-22 20:24:07.274 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:24:07.275 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 46.4173ms
2023-06-22 20:24:17.839 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile application/json 45
2023-06-22 20:24:17.842 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:24:17.843 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdateProfileAsync(ExpenseMaster.BusinessLogic.Dto.ProfileDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:24:17.861 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:24:17.937 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster) in 81.5759ms
2023-06-22 20:24:17.939 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync (ExpenseMaster)'
2023-06-22 20:24:18.031 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Email 'string2' is already associated with another user.
   at ExpenseMaster.BusinessLogic.Implementations.ProfileService.UpdateProfileAsync(ProfileDto profileDto, Int32 userId) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster.BusinessLogic\Implementations\ProfileService.cs:line 35
   at ExpenseMaster.Controllers.ProfileController.UpdateProfileAsync(ProfileDto profileDto) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Controllers\ProfileController.cs:line 37
   at lambda_method174(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ExpenseMaster.Middlewares.ExceptionHandlingMiddleware.Invoke(HttpContext context) in D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\Middlewares\ExceptionHandlingMiddleware.cs:line 20
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-06-22 20:24:18.043 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile application/json 45 - 500 - text/plain;+charset=utf-8 204.1427ms
2023-06-22 20:55:51.968 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Categories] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:55:52.178 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Expenses] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:55:52.204 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Incomes] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:55:52.276 +03:00 [INF] User profile is available. Using 'C:\Users\stasi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-22 20:55:53.281 +03:00 [INF] Now listening on: https://localhost:7124
2023-06-22 20:55:53.282 +03:00 [INF] Now listening on: http://localhost:5205
2023-06-22 20:55:53.326 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-22 20:55:53.328 +03:00 [INF] Hosting environment: Development
2023-06-22 20:55:53.329 +03:00 [INF] Content root path: D:\Программы\Visual Studio\VS Projects\ExpenseMaster\ExpenseMaster\
2023-06-22 20:55:54.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/index.html - -
2023-06-22 20:55:55.623 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/index.html - - - 200 - text/html;charset=utf-8 806.6337ms
2023-06-22 20:55:55.685 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - -
2023-06-22 20:55:55.703 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 17.4618ms
2023-06-22 20:55:55.858 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - -
2023-06-22 20:55:56.140 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 281.7675ms
2023-06-22 20:56:10.459 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Registration application/json 56
2023-06-22 20:56:10.474 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster)'
2023-06-22 20:56:10.520 +03:00 [INF] Route matched with {action = "Create", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:56:11.021 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__userRegistrationDto_Login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Login] = @__userRegistrationDto_Login_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-06-22 20:56:11.277 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Login], [PasswordHash], [PasswordSalt], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-06-22 20:56:11.373 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.UserRegistrationDto'.
2023-06-22 20:56:11.392 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster) in 861.4901ms
2023-06-22 20:56:11.396 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Create (ExpenseMaster)'
2023-06-22 20:56:11.409 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Registration application/json 56 - 200 - application/json;+charset=utf-8 949.8329ms
2023-06-22 20:56:19.972 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 39
2023-06-22 20:56:19.974 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:56:19.978 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:56:20.217 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:56:20.446 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 20:56:20.449 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 468.9492ms
2023-06-22 20:56:20.451 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:56:20.452 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 39 - 200 - application/json;+charset=utf-8 479.3840ms
2023-06-22 20:56:34.660 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7124/Profile - -
2023-06-22 20:56:34.785 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:56:34.789 +03:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] GetProfileAsync() on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:56:34.806 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2023-06-22 20:56:34.811 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:56:34.813 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster) in 21.9873ms
2023-06-22 20:56:34.815 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.GetProfileAsync (ExpenseMaster)'
2023-06-22 20:56:34.817 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7124/Profile - - - 200 - application/json;+charset=utf-8 157.4665ms
2023-06-22 20:56:57.494 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7124/Profile/UpdatePassword application/json 75
2023-06-22 20:56:57.496 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.ProfileController.UpdatePassword (ExpenseMaster)'
2023-06-22 20:56:57.500 +03:00 [INF] Route matched with {action = "UpdatePassword", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ExpenseMaster.BusinessLogic.Dto.ProfileDto]] UpdatePassword(ExpenseMaster.BusinessLogic.Dto.UpdateProfilePasswordDto) on controller ExpenseMaster.Controllers.ProfileController (ExpenseMaster).
2023-06-22 20:56:57.513 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-06-22 20:56:57.531 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 30), @p1='?' (Size = 20), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (Size = 8000) (DbType = Binary), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [Login] = @p1, [PasswordHash] = @p2, [PasswordSalt] = @p3, [RoleId] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2023-06-22 20:56:57.536 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.ProfileDto'.
2023-06-22 20:56:57.537 +03:00 [INF] Executed action ExpenseMaster.Controllers.ProfileController.UpdatePassword (ExpenseMaster) in 34.1733ms
2023-06-22 20:56:57.538 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.ProfileController.UpdatePassword (ExpenseMaster)'
2023-06-22 20:56:57.539 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7124/Profile/UpdatePassword application/json 75 - 200 - application/json;+charset=utf-8 45.4772ms
2023-06-22 20:57:09.758 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 39
2023-06-22 20:57:09.760 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:57:09.761 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:57:09.779 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:57:09.930 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2023-06-22 20:57:09.932 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 169.8876ms
2023-06-22 20:57:09.934 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:57:09.935 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 39 - 400 - text/plain;+charset=utf-8 176.7806ms
2023-06-22 20:57:15.907 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7124/Auth/Login application/json 39
2023-06-22 20:57:15.908 +03:00 [INF] Executing endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:57:15.910 +03:00 [INF] Route matched with {action = "Get", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(ExpenseMaster.BusinessLogic.Dto.UserLoginDto) on controller ExpenseMaster.Controllers.AuthController (ExpenseMaster).
2023-06-22 20:57:15.914 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__login_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[Login], [u].[PasswordHash], [u].[PasswordSalt], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Login] = @__login_0
2023-06-22 20:57:15.918 +03:00 [INF] Executing OkObjectResult, writing value of type 'ExpenseMaster.BusinessLogic.Dto.SuccesLoginDto'.
2023-06-22 20:57:15.919 +03:00 [INF] Executed action ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster) in 6.6987ms
2023-06-22 20:57:15.919 +03:00 [INF] Executed endpoint 'ExpenseMaster.Controllers.AuthController.Get (ExpenseMaster)'
2023-06-22 20:57:15.920 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7124/Auth/Login application/json 39 - 200 - application/json;+charset=utf-8 13.7851ms
